<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador de Fungicidas - FRAC</title>
    <style>
        :root {
            --primary: #5d4037;
            --primary-dark: #3e2723;
            --primary-light: #d7ccc8;
            --secondary: #00695c;
            --secondary-light: #e0f2f1;
            --accent: #ff8f00;
            --text: #333;
            --text-light: #666;
            --bg: #f9f9f9;
            --card-bg: #ffffff;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --radius: 8px;
            
            /* Colores para grupos de fungicidas según FRAC */
            --group-a: #e8f5e9;
            --group-a-dark: #2e7d32;
            --group-b: #f3e5f5;
            --group-b-dark: #7b1fa2;
            --group-c: #e3f2fd;
            --group-c-dark: #1565c0;
            --group-d: #fff3e0;
            --group-d-dark: #ef6c00;
            --group-e: #ffebee;
            --group-e-dark: #c62828;
            --group-f: #f5f5f5;
            --group-f-dark: #616161;
            --group-m: #e0f7fa;
            --group-m-dark: #00838f;
            --group-p: #fff8e1;
            --group-p-dark: #ff8f00;
            --group-u: #fce4ec;
            --group-u-dark: #ad1457;
            --group-nc: #eceff1;
            --group-nc-dark: #455a64;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 1rem;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            font-size: 1.8rem;
        }
        
        .menu-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }
        
        .sidebar {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            transition: right 0.3s ease;
            z-index: 1000;
            padding: 2rem;
            overflow-y: auto;
        }
        
        .sidebar.active {
            right: 0;
        }
        
        .sidebar h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 0.5rem;
        }
        
        .sidebar-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
        }
        
        .settings-group {
            margin-bottom: 1.5rem;
        }
        
        .settings-group h3 {
            margin-bottom: 0.8rem;
            color: var(--secondary);
            font-size: 1rem;
        }
        
        .settings-option {
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
        }
        
        .settings-option input {
            margin-right: 0.5rem;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
        }
        
        .overlay.active {
            display: block;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .search-section {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }
        
        .search-box {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        #fungicide-search {
            flex: 1;
            padding: 0.8rem 1rem;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            font-size: 1rem;
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        button:hover {
            background-color: var(--primary-dark);
        }
        
        .suggestions {
            position: relative;
        }
        
        #suggestions-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            display: none;
        }
        
        .suggestion-item {
            padding: 0.8rem 1rem;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }
        
        .suggestion-item:hover {
            background-color: var(--primary-light);
        }
        
        .results-section {
            display: none;
        }
        
        .active-fungicide {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }
        
        .fungicide-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .fungicide-name {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 600;
        }
        
        .frac-badge {
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .fungicide-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .detail-item {
            margin-bottom: 0.5rem;
        }
        
        .detail-label {
            font-weight: 600;
            color: var(--text-light);
        }
        
        .recommendations {
            margin-top: 2rem;
        }
        
        .recommendations h3 {
            margin-bottom: 1rem;
            color: var(--primary);
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 0.5rem;
        }
        
        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .recommendation-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }
        
        .recommendation-card:hover {
            transform: translateY(-5px);
        }
        
        .rec-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .rec-frac {
            color: var(--secondary);
            font-weight: 500;
            margin-bottom: 0.8rem;
        }
        
        .rec-details {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .no-results {
            text-align: center;
            padding: 2rem;
            color: var(--text-light);
        }
        
        .legend-button {
            background-color: var(--secondary);
            margin-left: auto;
        }
        
        .legend-button:hover {
            background-color: #004d40;
        }
        
        /* Estilos para el modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 1100;
            overflow: auto;
        }
        
        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 2rem;
            border-radius: var(--radius);
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        
        .close-button {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-light);
        }
        
        .modal-title {
            color: var(--primary);
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 0.5rem;
        }
        
        .action-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: var(--radius);
        }
        
        .action-section h3 {
            margin-bottom: 1rem;
            color: var(--text);
        }
        
        .mode-list {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .mode-of-action {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 0.2rem;
        }
        
        .group-a-section {
            background-color: var(--group-a);
            border-left: 4px solid var(--group-a-dark);
        }
        
        .group-a-mode {
            background-color: var(--group-a-dark);
            color: white;
        }
        
        .group-b-section {
            background-color: var(--group-b);
            border-left: 4px solid var(--group-b-dark);
        }
        
        .group-b-mode {
            background-color: var(--group-b-dark);
            color: white;
        }
        
        .group-c-section {
            background-color: var(--group-c);
            border-left: 4px solid var(--group-c-dark);
        }
        
        .group-c-mode {
            background-color: var(--group-c-dark);
            color: white;
        }
        
        .group-d-section {
            background-color: var(--group-d);
            border-left: 4px solid var(--group-d-dark);
        }
        
        .group-d-mode {
            background-color: var(--group-d-dark);
            color: white;
        }
        
        .group-e-section {
            background-color: var(--group-e);
            border-left: 4px solid var(--group-e-dark);
        }
        
        .group-e-mode {
            background-color: var(--group-e-dark);
            color: white;
        }
        
        .group-m-section {
            background-color: var(--group-m);
            border-left: 4px solid var(--group-m-dark);
        }
        
        .group-m-mode {
            background-color: var(--group-m-dark);
            color: white;
        }
        
        .group-p-section {
            background-color: var(--group-p);
            border-left: 4px solid var(--group-p-dark);
        }
        
        .group-p-mode {
            background-color: var(--group-p-dark);
            color: white;
        }
        
        .group-u-section {
            background-color: var(--group-u);
            border-left: 4px solid var(--group-u-dark);
        }
        
        .group-u-mode {
            background-color: var(--group-u-dark);
            color: white;
        }
        
        .group-nc-section {
            background-color: var(--group-nc);
            border-left: 4px solid var(--group-nc-dark);
        }
        
        .group-nc-mode {
            background-color: var(--group-nc-dark);
            color: white;
        }
        
        .modal-note {
            background-color: #fffde7;
            padding: 1rem;
            border-radius: var(--radius);
            border-left: 4px solid #fbc02d;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .search-box {
                flex-direction: column;
            }
            
            .fungicide-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .recommendation-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Buscador de Fungicidas - FRAC</h1>
            <div>
                <button class="legend-button" id="legend-btn">Leyenda Grupos FRAC</button>
                <button class="menu-toggle">☰ Ajustes</button>
            </div>
        </div>
    </header>
    
    <div class="overlay" id="overlay"></div>
    
    <div class="sidebar" id="sidebar">
        <button class="sidebar-close">×</button>
        <h2>Ajustes de Recomendación</h2>
        
        <div class="settings-group">
            <h3>Método de Recomendación</h3>
            <div class="settings-option">
                <input type="radio" id="mode-frac" name="recommendation-mode" value="frac" checked>
                <label for="mode-frac">Por Grupo FRAC</label>
            </div>
            <div class="settings-option">
                <input type="radio" id="mode-chemical" name="recommendation-mode" value="chemical">
                <label for="mode-chemical">Por Grupo Químico</label>
            </div>
            <div class="settings-option">
                <input type="radio" id="mode-target" name="recommendation-mode" value="target">
                <label for="mode-target">Por Sitio de Acción</label>
            </div>
        </div>
    </div>
    
    <!-- Modal de Información -->
    <div id="info-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 class="modal-title">Clasificación FRAC de Fungicidas</h2>
            
            <div class="action-section group-a-section">
                <h3>Grupo A - Inhibidores de la síntesis de ácidos nucleicos</h3>
                <p>Fungicidas que afectan la síntesis de ARN y ADN en los hongos.</p>
                <p><strong>Grupos principales:</strong></p>
                <ul class="mode-list">
                    <li>A1: Inhibidores de la RNA polimerasa I</li>
                    <li>A2: Inhibidores de la adenosina desaminasa</li>
                    <li>A3: Inhibidores de la DNA/RNA síntesis</li>
                    <li>A4: Inhibidores de la tubulina</li>
                </ul>
                <p>Los productos marcados con <span class="mode-of-action group-a-mode">Grupo A</span> pertenecen a esta categoría.</p>
            </div>
            
            <div class="action-section group-b-section">
                <h3>Grupo B - Inhibidores de la respiración mitocondrial</h3>
                <p>Fungicidas que afectan la cadena respiratoria en las mitocondrias.</p>
                <p><strong>Grupos principales:</strong></p>
                <ul class="mode-list">
                    <li>B1: Inhibidores del complejo I</li>
                    <li>B2: Inhibidores del complejo II</li>
                    <li>B3: Inhibidores del complejo III</li>
                    <li>B4: Desacoplantes de la fosforilación oxidativa</li>
                    <li>B5: Inhibidores de la ATP sintasa</li>
                </ul>
                <p>Los productos marcados con <span class="mode-of-action group-b-mode">Grupo B</span> pertenecen a esta categoría.</p>
            </div>
            
            <div class="action-section group-c-section">
                <h3>Grupo C - Inhibidores de la síntesis de aminoácidos y proteínas</h3>
                <p>Fungicidas que interfieren con la síntesis de proteínas en los hongos.</p>
                <p><strong>Grupos principales:</strong></p>
                <ul class="mode-list">
                    <li>C1: Inhibidores de la metionina síntesis</li>
                    <li>C2: Inhibidores de la síntesis proteica</li>
                    <li>C3: Inhibidores de la treonina desaminasa</li>
                    <li>C4: Inhibidores de la síntesis de isoleucina/valina</li>
                </ul>
                <p>Los productos marcados con <span class="mode-of-action group-c-mode">Grupo C</span> pertenecen a esta categoría.</p>
            </div>
            
            <div class="action-section group-d-section">
                <h3>Grupo D - Inhibidores de la división celular</h3>
                <p>Fungicidas que afectan la mitosis y citoquinesis en hongos.</p>
                <p><strong>Grupos principales:</strong></p>
                <ul class="mode-list">
                    <li>D1: Inhibidores de la tubulina</li>
                    <li>D2: Inhibidores de la división celular</li>
                    <li>D3: Inhibidores de la septina</li>
                </ul>
                <p>Los productos marcados con <span class="mode-of-action group-d-mode">Grupo D</span> pertenecen a esta categoría.</p>
            </div>
            
            <div class="action-section group-e-section">
                <h3>Grupo E - Inhibidores de la señalización celular</h3>
                <p>Fungicidas que interfieren con procesos de señalización en hongos.</p>
                <p><strong>Grupos principales:</strong></p>
                <ul class="mode-list">
                    <li>E1: Inhibidores de la MAP quinasa</li>
                    <li>E2: Inhibidores de la histidina quinasa</li>
                    <li>E3: Inhibidores de la G proteína</li>
                </ul>
                <p>Los productos marcados con <span class="mode-of-action group-e-mode">Grupo E</span> pertenecen a esta categoría.</p>
            </div>
            
            <div class="action-section group-m-section">
                <h3>Grupo M - Fungicidas multi-sitio</h3>
                <p>Fungicidas con acción en múltiples sitios bioquímicos.</p>
                <p><strong>Grupos principales:</strong></p>
                <ul class="mode-list">
                    <li>M1: Inorgánicos</li>
                    <li>M2: Ditlocarbamatos</li>
                    <li>M3: Derivados del cloro</li>
                    <li>M4: Ftálmicos</li>
                    <li>M5: Cloronitrilos</li>
                    <li>M7: Sulfamidas</li>
                    <li>M8: Triazoles inorgánicos</li>
                    <li>M9: Ditionatos</li>
                </ul>
                <p>Los productos marcados con <span class="mode-of-action group-m-mode">Grupo M</span> pertenecen a esta categoría.</p>
            </div>
            
            <div class="action-section group-p-section">
                <h3>Grupo P - Inductores de resistencia en plantas</h3>
                <p>Compuestos que activan los mecanismos de defensa de las plantas.</p>
                <p><strong>Grupos principales:</strong></p>
                <ul class="mode-list">
                    <li>P1: Inductores de fitoalexinas</li>
                    <li>P2: Activadores de resistencia sistémica</li>
                    <li>P3: Elicitores</li>
                </ul>
                <p>Los productos marcados con <span class="mode-of-action group-p-mode">Grupo P</span> pertenecen a esta categoría.</p>
            </div>
            
            <div class="action-section group-u-section">
                <h3>Grupo U - Modo de acción desconocido</h3>
                <p>Fungicidas con modo de acción no completamente elucidado.</p>
                <p><strong>Grupos principales:</strong></p>
                <ul class="mode-list">
                    <li>U1: Compuestos cúpricos</li>
                    <li>U2: Compuestos de azufre</li>
                    <li>U3: Compuestos diversos</li>
                    <li>U4: Compuestos microbianos</li>
                    <li>U5: Compuestos botánicos</li>
                    <li>U6: Aceites minerales y vegetales</li>
                    <li>U7: Extractos naturales</li>
                    <li>U8: Modo de acción desconocido</li>
                </ul>
                <p>Los productos marcados con <span class="mode-of-action group-u-mode">Grupo U</span> pertenecen a esta categoría.</p>
            </div>
            
            <div class="action-section group-nc-section">
                <h3>Grupo NC - No clasificados</h3>
                <p>Fungicidas que no han sido clasificados en los grupos anteriores.</p>
                <p><strong>Características:</strong></p>
                <ul class="mode-list">
                    <li>Nuevos compuestos en evaluación</li>
                    <li>Compuestos con mecanismos novedosos</li>
                    <li>Productos en proceso de clasificación</li>
                </ul>
                <p>Los productos marcados con <span class="mode-of-action group-nc-mode">Grupo NC</span> pertenecen a esta categoría.</p>
            </div>
            
            <div class="modal-note">
                <p><strong>Nota importante FRAC:</strong> La rotación de fungicidas con diferentes modos de acción es fundamental para prevenir el desarrollo de resistencia. Siempre consulte las recomendaciones locales y las etiquetas de los productos.</p>
                <p><strong>Las estrategias de manejo de resistencia deben basarse en los códigos de grupo FRAC.</strong></p>
            </div>
        </div>
    </div>
    
    <div class="container">
        <section class="search-section">
            <h2>Buscar Fungicida</h2>
            <div class="search-box">
                <div class="suggestions" style="flex: 1;">
                    <input type="text" id="fungicide-search" placeholder="Ej: Azoxistrobina, Tebuconazol, Mancozeb...">
                    <div id="suggestions-list"></div>
                </div>
                <button id="search-btn">Buscar</button>
            </div>
        </section>
        
        <section class="results-section" id="results-section">
            <div class="active-fungicide" id="active-fungicide">
                <!-- Información del fungicida seleccionado -->
            </div>
            
            <div class="recommendations">
                <h3>Fungicidas con Modos de Acción Diferentes</h3>
                <div class="recommendation-grid" id="recommendation-grid">
                    <!-- Recomendaciones se cargarán aquí -->
                </div>
            </div>
        </section>
    </div>

    <script>
        // Base de datos de fungicidas según clasificación FRAC
        const fungicidesDatabase = [
            // Grupo 1 - Inhibidores de la beta-tubulina
            {
                name: "Benomilo",
                fracCode: "1",
                fracGroup: "Inhibidores de la beta-tubulina",
                targetSite: "División celular",
                chemicalGroup: "Benzimidazoles",
                resistanceRisk: "Alta",
                commonUses: "Control de enfermedades foliares y de suelo"
            },
            {
                name: "Carbendazima",
                fracCode: "1",
                fracGroup: "Inhibidores de la beta-tubulina",
                targetSite: "División celular",
                chemicalGroup: "Benzimidazoles",
                resistanceRisk: "Alta",
                commonUses: "Amplio espectro contra hongos"
            },
            {
                name: "Tiofanato-metilo",
                fracCode: "1",
                fracGroup: "Inhibidores de la beta-tubulina",
                targetSite: "División celular",
                chemicalGroup: "Benzimidazoles",
                resistanceRisk: "Alta",
                commonUses: "Control de oídio y otras enfermedades"
            },

            // Grupo 3 - Desmetilación en la síntesis de esteroles (DMI)
            {
                name: "Tebuconazol",
                fracCode: "3",
                fracGroup: "Inhibidores de la desmetilación (DMI)",
                targetSite: "Síntesis de membranas",
                chemicalGroup: "Triazoles",
                resistanceRisk: "Moderada-Alta",
                commonUses: "Amplio espectro en cereales y frutales"
            },
            {
                name: "Propiconazol",
                fracCode: "3",
                fracGroup: "Inhibidores de la desmetilación (DMI)",
                targetSite: "Síntesis de membranas",
                chemicalGroup: "Triazoles",
                resistanceRisk: "Moderada-Alta",
                commonUses: "Control de royas y otras enfermedades"
            },
            {
                name: "Epoxiconazol",
                fracCode: "3",
                fracGroup: "Inhibidores de la desmetilación (DMI)",
                targetSite: "Síntesis de membranas",
                chemicalGroup: "Triazoles",
                resistanceRisk: "Moderada-Alta",
                commonUses: "Cereales y cultivos extensivos"
            },

            // Grupo 4 - Inhibidores de la histidina quinasa
            {
                name: "Iprodiona",
                fracCode: "2",
                fracGroup: "Inhibidores de la histidina quinasa",
                targetSite: "Señalización celular",
                chemicalGroup: "Dicarboximidas",
                resistanceRisk: "Alta",
                commonUses: "Control de Botrytis y Sclerotinia"
            },
            {
                name: "Vinclozolina",
                fracCode: "2",
                fracGroup: "Inhibidores de la histidina quinasa",
                targetSite: "Señalización celular",
                chemicalGroup: "Dicarboximidas",
                resistanceRisk: "Alta",
                commonUses: "Enfermedades en frutales y hortalizas"
            },

            // Grupo 7 - Inhibidores de la succinato deshidrogenasa (SDHI)
            {
                name: "Boscalida",
                fracCode: "7",
                fracGroup: "Inhibidores de la succinato deshidrogenasa",
                targetSite: "Respiración mitocondrial",
                chemicalGroup: "Carboxamidas",
                resistanceRisk: "Moderada-Alta",
                commonUses: "Control de Botrytis y otras enfermedades"
            },
            {
                name: "Fluxapiroxad",
                fracCode: "7",
                fracGroup: "Inhibidores de la succinato deshidrogenasa",
                targetSite: "Respiración mitocondrial",
                chemicalGroup: "Carboxamidas",
                resistanceRisk: "Moderada-Alta",
                commonUses: "Amplio espectro en múltiples cultivos"
            },
            {
                name: "Penthiopirad",
                fracCode: "7",
                fracGroup: "Inhibidores de la succinato deshidrogenasa",
                targetSite: "Respiración mitocondrial",
                chemicalGroup: "Carboxamidas",
                resistanceRisk: "Moderada-Alta",
                commonUses: "Control de enfermedades foliares"
            },

            // Grupo 11 - Inhibidores de la quinona externa (QoI)
            {
                name: "Azoxistrobina",
                fracCode: "11",
                fracGroup: "Inhibidores de la quinona externa",
                targetSite: "Respiración mitocondrial",
                chemicalGroup: "Estrobilurinas",
                resistanceRisk: "Alta",
                commonUses: "Amplio espectro en múltiples cultivos"
            },
            {
                name: "Piraclostrobina",
                fracCode: "11",
                fracGroup: "Inhibidores de la quinona externa",
                targetSite: "Respiración mitocondrial",
                chemicalGroup: "Estrobilurinas",
                resistanceRisk: "Alta",
                commonUses: "Cereales, soja y otros cultivos"
            },
            {
                name: "Trifloxistrobina",
                fracCode: "11",
                fracGroup: "Inhibidores de la quinona externa",
                targetSite: "Respiración mitocondrial",
                chemicalGroup: "Estrobilurinas",
                resistanceRisk: "Alta",
                commonUses: "Frutales y cultivos hortícolas"
            },

            // Grupo M - Multi-sitio
            {
                name: "Mancozeb",
                fracCode: "M3",
                fracGroup: "Fungicidas multi-sitio",
                targetSite: "Múltiples sitios",
                chemicalGroup: "Ditiocarbamatos",
                resistanceRisk: "Baja",
                commonUses: "Protector de amplio espectro"
            },
            {
                name: "Clorotalonil",
                fracCode: "M5",
                fracGroup: "Fungicidas multi-sitio",
                targetSite: "Múltiples sitios",
                chemicalGroup: "Cloronitrilos",
                resistanceRisk: "Baja",
                commonUses: "Protector de amplio espectro"
            },
            {
                name: "Captan",
                fracCode: "M4",
                fracGroup: "Fungicidas multi-sitio",
                targetSite: "Múltiples sitios",
                chemicalGroup: "Ftálmicos",
                resistanceRisk: "Baja",
                commonUses: "Tratamiento de semillas y frutales"
            },

            // Grupo 12 - Inhibidores de la fosfatidil-inositol quinasa
            {
                name: "Fenpicoxamida",
                fracCode: "12",
                fracGroup: "Inhibidores de la fosfatidil-inositol quinasa",
                targetSite: "Señalización celular",
                chemicalGroup: "Pirazolcarboxamidas",
                resistanceRisk: "Moderada",
                commonUses: "Control de enfermedades en cereales"
            },

            // Grupo 13 - Inhibidores de la síntesis de melanina
            {
                name: "Triciclozol",
                fracCode: "13",
                fracGroup: "Inhibidores de la síntesis de melanina",
                targetSite: "Formación de apresorio",
                chemicalGroup: "Carboxanilidas",
                resistanceRisk: "Moderada",
                commonUses: "Control específico de Pyricularia en arroz"
            },

            // Grupo 29 - Inhibidores de la glucosa fosfato isomerasa
            {
                name: "Fosetil-Al",
                fracCode: "33",
                fracGroup: "Fosfonatos",
                targetSite: "Múltiples sitios",
                chemicalGroup: "Fosfonatos",
                resistanceRisk: "Baja",
                commonUses: "Control de enfermedades de suelo y follaje"
            },

            // Grupo 40 - Inhibidores de la síntesis de C6-cetoreductasa
            {
                name: "Fenhexamida",
                fracCode: "17",
                fracGroup: "Inhibidores de la hidroximetilglutaril-CoA reductasa",
                targetSite: "Síntesis de esteroles",
                chemicalGroup: "Hidroximanilidas",
                resistanceRisk: "Moderada",
                commonUses: "Control específico de Botrytis"
            },

            // Grupo P - Inductores de resistencia
            {
                name: "Acibenzolar-S-metilo",
                fracCode: "P1",
                fracGroup: "Inductores de resistencia sistémica",
                targetSite: "Sistema defensivo de la planta",
                chemicalGroup: "Benzotiadiazoles",
                resistanceRisk: "Baja",
                commonUses: "Activador de defensas en múltiples cultivos"
            }
        ];

        // Mapeo de grupos FRAC a colores
        const fracColors = {
            "1": { background: "var(--group-a-dark)", text: "white" },
            "2": { background: "var(--group-b-dark)", text: "white" },
            "3": { background: "var(--group-c-dark)", text: "white" },
            "4": { background: "var(--group-d-dark)", text: "white" },
            "7": { background: "var(--group-e-dark)", text: "white" },
            "11": { background: "var(--group-m-dark)", text: "white" },
            "12": { background: "var(--group-p-dark)", text: "white" },
            "13": { background: "var(--group-u-dark)", text: "white" },
            "17": { background: "var(--group-nc-dark)", text: "white" },
            "33": { background: "var(--group-a-dark)", text: "white" },
            "M3": { background: "var(--group-m-dark)", text: "white" },
            "M4": { background: "var(--group-m-dark)", text: "white" },
            "M5": { background: "var(--group-m-dark)", text: "white" },
            "P1": { background: "var(--group-p-dark)", text: "white" }
        };

        // Elementos del DOM
        const searchInput = document.getElementById('fungicide-search');
        const searchBtn = document.getElementById('search-btn');
        const suggestionsList = document.getElementById('suggestions-list');
        const resultsSection = document.getElementById('results-section');
        const activeFungicideDiv = document.getElementById('active-fungicide');
        const recommendationGrid = document.getElementById('recommendation-grid');
        const menuToggle = document.querySelector('.menu-toggle');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const sidebarClose = document.querySelector('.sidebar-close');
        const legendBtn = document.getElementById('legend-btn');
        const infoModal = document.getElementById('info-modal');
        const closeButton = document.querySelector('.close-button');

        // Variables globales
        let currentRecommendations = [];
        let currentFungicide = null;
        let recommendationMode = 'frac'; // Por defecto: por grupo FRAC

        // Configurar menú hamburguesa
        menuToggle.addEventListener('click', function() {
            sidebar.classList.add('active');
            overlay.classList.add('active');
        });

        sidebarClose.addEventListener('click', function() {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        });

        overlay.addEventListener('click', function() {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        });

        // Configurar modal de leyenda
        legendBtn.addEventListener('click', function() {
            infoModal.style.display = 'block';
        });

        closeButton.addEventListener('click', function() {
            infoModal.style.display = 'none';
        });

        window.addEventListener('click', function(event) {
            if (event.target === infoModal) {
                infoModal.style.display = 'none';
            }
        });

        // Configurar modo de recomendación
        document.querySelectorAll('input[name="recommendation-mode"]').forEach(radio => {
            radio.addEventListener('change', function() {
                recommendationMode = this.value;
                if (currentFungicide) {
                    currentRecommendations = getRecommendations(currentFungicide);
                    displayRecommendations(currentRecommendations);
                }
            });
        });

        // Mostrar sugerencias al escribir
        searchInput.addEventListener('input', function() {
            const query = this.value.toLowerCase();
            suggestionsList.innerHTML = '';
            
            if (query.length < 2) {
                suggestionsList.style.display = 'none';
                return;
            }
            
            const matches = fungicidesDatabase.filter(fungicide => 
                fungicide.name.toLowerCase().includes(query)
            );
            
            if (matches.length > 0) {
                matches.forEach(fungicide => {
                    const div = document.createElement('div');
                    div.className = 'suggestion-item';
                    div.textContent = fungicide.name;
                    div.addEventListener('click', function() {
                        searchInput.value = fungicide.name;
                        suggestionsList.style.display = 'none';
                        searchFungicide(fungicide.name);
                    });
                    suggestionsList.appendChild(div);
                });
                suggestionsList.style.display = 'block';
            } else {
                suggestionsList.style.display = 'none';
            }
        });

        // Ocultar sugerencias al hacer clic fuera
        document.addEventListener('click', function(e) {
            if (!searchInput.contains(e.target) && !suggestionsList.contains(e.target)) {
                suggestionsList.style.display = 'none';
            }
        });

        // Buscar al hacer clic en el botón
        searchBtn.addEventListener('click', function() {
            const query = searchInput.value.trim();
            if (query) {
                searchFungicide(query);
            }
        });

        // Permitir búsqueda con Enter
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const query = searchInput.value.trim();
                if (query) {
                    searchFungicide(query);
                }
            }
        });

        // Buscar fungicida y mostrar resultados
        function searchFungicide(query) {
            const fungicide = fungicidesDatabase.find(fung => 
                fung.name.toLowerCase() === query.toLowerCase()
            );
            
            if (!fungicide) {
                alert('Fungicida no encontrado. Intente con otro nombre.');
                return;
            }
            
            currentFungicide = fungicide;
            
            // Mostrar información del fungicida activo
            displayActiveFungicide(fungicide);
            
            // Obtener recomendaciones
            currentRecommendations = getRecommendations(fungicide);
            
            // Mostrar recomendaciones
            displayRecommendations(currentRecommendations);
            
            // Mostrar sección de resultados
            resultsSection.style.display = 'block';
            
            // Desplazarse a los resultados
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        // Mostrar información del fungicida activo
        function displayActiveFungicide(fungicide) {
            const colorStyle = fracColors[fungicide.fracCode] || { background: "var(--group-nc-dark)", text: "white" };
            
            activeFungicideDiv.innerHTML = `
                <div class="fungicide-header">
                    <h2 class="fungicide-name">${fungicide.name}</h2>
                    <span class="frac-badge" style="background-color: ${colorStyle.background}">Grupo ${fungicide.fracCode} - ${fungicide.fracGroup}</span>
                </div>
                <div class="fungicide-details">
                    <div>
                        <div class="detail-item">
                            <span class="detail-label">Sitio de Acción:</span> ${fungicide.targetSite}
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Grupo Químico:</span> ${fungicide.chemicalGroup}
                        </div>
                    </div>
                    <div>
                        <div class="detail-item">
                            <span class="detail-label">Riesgo de Resistencia:</span> ${fungicide.resistanceRisk}
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Usos Comunes:</span> ${fungicide.commonUses}
                        </div>
                    </div>
                </div>
            `;
        }

        // Obtener recomendaciones según el modo seleccionado
        function getRecommendations(activeFungicide) {
            let filteredFungicides = fungicidesDatabase.filter(fungicide => 
                fungicide.name !== activeFungicide.name
            );
            
            // Aplicar filtro según el modo de recomendación
            switch(recommendationMode) {
                case 'frac':
                    // Excluir mismo grupo FRAC
                    return filteredFungicides.filter(fungicide => 
                        fungicide.fracCode !== activeFungicide.fracCode
                    );
                case 'chemical':
                    // Excluir mismo grupo químico
                    return filteredFungicides.filter(fungicide => 
                        fungicide.chemicalGroup !== activeFungicide.chemicalGroup
                    );
                case 'target':
                    // Excluir mismo sitio de acción
                    return filteredFungicides.filter(fungicide => 
                        fungicide.targetSite !== activeFungicide.targetSite
                    );
                default:
                    return filteredFungicides;
            }
        }

        // Mostrar recomendaciones
        function displayRecommendations(recommendations) {
            if (recommendations.length === 0) {
                recommendationGrid.innerHTML = `
                    <div class="no-results">
                        <p>No se encontraron fungicidas con modos de acción diferentes según el criterio seleccionado.</p>
                    </div>
                `;
                return;
            }
            
            recommendationGrid.innerHTML = '';
            
            recommendations.forEach(fungicide => {
                const colorStyle = fracColors[fungicide.fracCode] || { background: "var(--group-nc-dark)", text: "white" };
                
                const card = document.createElement('div');
                card.className = 'recommendation-card';
                card.innerHTML = `
                    <div class="rec-name">${fungicide.name}</div>
                    <div class="rec-frac">
                        Grupo FRAC: 
                        <span class="frac-badge" style="background-color: ${colorStyle.background}">
                            ${fungicide.fracCode} - ${fungicide.fracGroup}
                        </span>
                    </div>
                    <div class="rec-details">
                        <p><strong>Sitio de Acción:</strong> ${fungicide.targetSite}</p>
                        <p><strong>Grupo Químico:</strong> ${fungicide.chemicalGroup}</p>
                        <p><strong>Riesgo de Resistencia:</strong> ${fungicide.resistanceRisk}</p>
                        <p><strong>Usos Comunes:</strong> ${fungicide.commonUses}</p>
                    </div>
                `;
                recommendationGrid.appendChild(card);
            });
        }
    </script>
</body>
</html>