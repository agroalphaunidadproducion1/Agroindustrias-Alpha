<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Evaluación de Organismos Benéficos</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <style>
    :root {
      --primary-color: #2e7d32;
      --primary-hover: #1b5e20;
      --light-bg: #f1f8e9;
      --light-border: #c8e6c9;
      --white: #ffffff;
      --shadow: rgba(0,128,0,0.2);
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: Arial, sans-serif;
      background-color: var(--light-bg);
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    form {
      background-color: var(--white);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px var(--shadow);
      max-width: 800px;
      margin: 0 auto 20px;
      border-left: 8px solid var(--primary-color);
      flex: 1;
    }
    
    h2 {
      text-align: center;
      color: var(--primary-color);
      margin-bottom: 20px;
    }
    
    .form-section {
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--light-border);
    }
    
    .section-title {
      font-weight: bold;
      color: var(--primary-color);
      margin-bottom: 15px;
      font-size: 18px;
      padding-bottom: 5px;
      border-bottom: 2px solid var(--light-border);
    }
    
    .form-row {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .form-group {
      flex: 1;
      min-width: 200px;
    }
    
    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
      color: var(--primary-color);
      font-size: 14px;
    }
    
    select, input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid var(--light-border);
      border-radius: 5px;
      background-color: #f9fff9;
      font-size: 14px;
    }
    
    button {
      margin-top: 20px;
      padding: 12px;
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      width: 100%;
      font-weight: bold;
      font-size: 16px;
    }
    
    button:hover {
      background-color: var(--primary-hover);
    }
    
    .footer {
      text-align: center;
      padding: 15px;
      background-color: var(--primary-color);
      color: white;
      border-radius: 5px;
      margin-top: auto;
    }
    
    .footer p {
      margin: 5px 0;
    }
    
    /* Estilos para checkboxes personalizados */
    .checkbox-group {
      margin-top: 10px;
    }
    
    .checkbox-option {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      padding: 8px;
      border-radius: 5px;
      background-color: #f9fff9;
      border: 1px solid var(--light-border);
      cursor: pointer;
    }
    
    .checkbox-option input[type="radio"] {
      margin-right: 10px;
    }
    
    .checkbox-option:hover {
      background-color: #e8f5e9;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .form-row {
        flex-direction: column;
        gap: 0;
      }
      
      .form-group {
        min-width: 100%;
      }
    }
  </style>
</head>
<body>

  <form id="formularioDañoOrganismos">
    <h2>🌾 Evaluación de Organismos Benéficos</h2>

    <!-- Información básica del producto -->
    <div class="form-section">
      <div class="section-title">Información del Producto</div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="categoria">Categoría del producto:</label>
          <select id="categoria" required>
            <option value="">Seleccione una categoría</option>
            <option value="Fungicida">Fungicida</option>
            <option value="Insecticida">Insecticida</option>
            <option value="Herbicida">Herbicida</option>
            <option value="Acaricida">Acaricida</option>
            <option value="Bactericida">Bactericida</option>
            <option value="Otro">Otro</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="producto">Nombre del producto:</label>
          <input type="text" id="producto" required>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="ingrediente">Ingrediente activo:</label>
          <input type="text" id="ingrediente" required>
        </div>
      </div>
    </div>

    <!-- A. Swirskii -->
    <div class="form-section">
      <div class="section-title">A. Swirskii</div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="swirskii_larva">Larva:</label>
          <select id="swirskii_larva">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="swirskii_adulto">Adulto:</label>
          <select id="swirskii_adulto">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="swirskii_huevo">Huevo:</label>
          <select id="swirskii_huevo">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="swirskii_ninfa">Ninfa:</label>
          <select id="swirskii_ninfa">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="swirskii_persistencia">Persistencia (días):</label>
          <input type="text" id="swirskii_persistencia" placeholder="Ej: 3-5 días">
        </div>
      </div>
    </div>

    <!-- N. Cucumeris -->
    <div class="form-section">
      <div class="section-title">N. Cucumeris</div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="cucumeris_larva">Larva:</label>
          <select id="cucumeris_larva">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="cucumeris_adulto">Adulto:</label>
          <select id="cucumeris_adulto">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="cucumeris_huevo">Huevo:</label>
          <select id="cucumeris_huevo">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="cucumeris_ninfa">Ninfa:</label>
          <select id="cucumeris_ninfa">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="cucumeris_persistencia">Persistencia (días):</label>
          <input type="text" id="cucumeris_persistencia" placeholder="Ej: 3-5 días">
        </div>
      </div>
    </div>

    <!-- Crizopa -->
    <div class="form-section">
      <div class="section-title">Crizopa</div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="crizopa_larva">Larva:</label>
          <select id="crizopa_larva">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="crizopa_adulto">Adulto:</label>
          <select id="crizopa_adulto">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="crizopa_huevo">Huevo:</label>
          <select id="crizopa_huevo">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="crizopa_ninfa">Ninfa:</label>
          <select id="crizopa_ninfa">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="crizopa_persistencia">Persistencia (días):</label>
          <input type="text" id="crizopa_persistencia" placeholder="Ej: 3-5 días">
        </div>
      </div>
    </div>

    <!-- Aphidius Colemani -->
    <div class="form-section">
      <div class="section-title">Aphidius Colemani</div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="colemani_larva">Larva:</label>
          <select id="colemani_larva">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="colemani_adulto">Adulto:</label>
          <select id="colemani_adulto">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="colemani_huevo">Huevo:</label>
          <select id="colemani_huevo">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="colemani_ninfa">Ninfa:</label>
          <select id="colemani_ninfa">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="colemani_persistencia">Persistencia (días):</label>
          <input type="text" id="colemani_persistencia" placeholder="Ej: 3-5 días">
        </div>
      </div>
    </div>

    <!-- Abejorros - Versión Simplificada -->
    <div class="form-section">
      <div class="section-title">Abejorros</div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="abejorros_colonia">Colonia:</label>
          <select id="abejorros_colonia">
            <option value="0">Sin efecto</option>
            <option value="1">🟢 Nivel 1 – &lt; 25%</option>
            <option value="2">🟡 Nivel 2 – 25%-50%</option>
            <option value="3">🟠 Nivel 3 – 50%-75%</option>
            <option value="4">🔴 Nivel 4 – &gt; 75%</option>
            <option value="?">⚪ Desconocido</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="abejorros_persistencia">Persistencia (días):</label>
          <input type="text" id="abejorros_persistencia" placeholder="Ej: 3-5 días">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label>Acción recomendada:</label>
          <div class="checkbox-group">
            <label class="checkbox-option">
              <input type="radio" name="abejorros_accion" value="ninguna" checked> 
              ✅ Ninguna acción
            </label>
            <label class="checkbox-option">
              <input type="radio" name="abejorros_accion" value="cubrir"> 
              🟧 Cubrir colmena
            </label>
            <label class="checkbox-option">
              <input type="radio" name="abejorros_accion" value="retirar"> 
              ❌ Retirar
            </label>
            <label class="checkbox-option">
              <input type="radio" name="abejorros_accion" value="incompatible"> 
              ⚠️ Incompatible
            </label>
          </div>
        </div>
      </div>
    </div>

    <button type="submit">Registrar Evaluación</button>
  </form>

  <script>
    // 🔐 Configuración Firebase
    const firebaseConfig = {
      databaseURL: "https://agro-productos-default-rtdb.firebaseio.com/"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // 🚀 Registro al nodo 'dañobeneficos'
    document.getElementById("formularioDañoOrganismos").addEventListener("submit", function(e) {
      e.preventDefault();

      // Obtener la acción seleccionada para abejorros
      const abejorrosAccion = document.querySelector('input[name="abejorros_accion"]:checked').value;

      const registro = {
        // Información del producto
        categoria: document.getElementById("categoria").value,
        producto: document.getElementById("producto").value,
        ingrediente: document.getElementById("ingrediente").value,
        
        // A. Swirskii
        swirskii_larva: document.getElementById("swirskii_larva").value,
        swirskii_adulto: document.getElementById("swirskii_adulto").value,
        swirskii_huevo: document.getElementById("swirskii_huevo").value,
        swirskii_ninfa: document.getElementById("swirskii_ninfa").value,
        swirskii_persistencia: document.getElementById("swirskii_persistencia").value,
        
        // N. Cucumeris
        cucumeris_larva: document.getElementById("cucumeris_larva").value,
        cucumeris_adulto: document.getElementById("cucumeris_adulto").value,
        cucumeris_huevo: document.getElementById("cucumeris_huevo").value,
        cucumeris_ninfa: document.getElementById("cucumeris_ninfa").value,
        cucumeris_persistencia: document.getElementById("cucumeris_persistencia").value,
        
        // Crizopa
        crizopa_larva: document.getElementById("crizopa_larva").value,
        crizopa_adulto: document.getElementById("crizopa_adulto").value,
        crizopa_huevo: document.getElementById("crizopa_huevo").value,
        crizopa_ninfa: document.getElementById("crizopa_ninfa").value,
        crizopa_persistencia: document.getElementById("crizopa_persistencia").value,
        
        // Aphidius Colemani
        colemani_larva: document.getElementById("colemani_larva").value,
        colemani_adulto: document.getElementById("colemani_adulto").value,
        colemani_huevo: document.getElementById("colemani_huevo").value,
        colemani_ninfa: document.getElementById("colemani_ninfa").value,
        colemani_persistencia: document.getElementById("colemani_persistencia").value,
        
        // Abejorros (versión simplificada)
        abejorros_colonia: document.getElementById("abejorros_colonia").value,
        abejorros_persistencia: document.getElementById("abejorros_persistencia").value,
        abejorros_accion: abejorrosAccion,
        
        timestamp: new Date().toISOString()
      };

      db.ref("dañobeneficos").push(registro)
        .then(() => {
          alert("✅ Registro guardado en Firebase (dañobeneficos).");
          this.reset();
        })
        .catch((error) => {
          console.error("❌ Error al guardar:", error);
          alert("Ocurrió un error al guardar en Firebase.");
        });
    });
  </script>
  
  <div class="footer">
    <p>Sistema Agroalpha © 2025 | Unidad produccion 1</p>
    <p>Versión 2.0 - Módulo completo</p>
  </div>
</body>
</html>
